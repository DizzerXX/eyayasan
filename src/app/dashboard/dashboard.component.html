<div class="template-layout">
  <app-sidebar></app-sidebar>
  <div class="main-content">
    <div class="content-card">
      <form>
        <div class="mb-3 row">
          <label for="table-filtering-search" class="col-xs-3 col-sm-auto col-form-label">Full text search:</label>
          <div class="col-xs-3 col-sm-auto">
            <input id="table-filtering-search" class="form-control" type="text" [formControl]="filter" />
          </div>
        </div>
      </form>
    </div>

    <div class="content-card">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col" (click)="onSort('name')">Country</th>
            <th scope="col" (click)="onSort('area')">Area</th>
            <th scope="col" (click)="onSort('population')">Population</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let country of paginatedCountries$ | async; let i = index">
            <th scope="row">{{ (page - 1) * pageSize + i + 1 }}</th>
            <td>
              <img
                [src]="'https://upload.wikimedia.org/wikipedia/commons/' + country.flag"
                [alt]="'The flag of ' + country.name"
                class="me-2"
                style="width: 20px"
              />
              {{ country.name }}
            </td>
            <td>{{ country.area | number }}</td>
            <td>{{ country.population | number }}</td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-between p-2">
        <ngb-pagination
          [collectionSize]="collectionSize"
          [(page)]="page"
          [pageSize]="pageSize"
          (pageChange)="refreshCountries()"
        ></ngb-pagination>

        <select class="form-select" style="width: auto" [(ngModel)]="pageSize" (ngModelChange)="refreshCountries()">
          <option [value]="2">2 items per page</option>
          <option [value]="4">4 items per page</option>
          <option [value]="6">6 items per page</option>
        </select>
      </div>
    </div>
  </div>
</div>
